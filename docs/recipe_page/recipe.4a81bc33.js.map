{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-407cc8d33815e4db.js","node_modules/@parcel/runtime-js/lib/runtime-e558359ac24a2789.js","node_modules/@parcel/runtime-js/lib/runtime-a92ae39e79ae386d.js","src/recipe_page/js/index.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"aNS2H\\\":\\\"recipe.4a81bc33.js\\\",\\\"11Lkf\\\":\\\"heart_red.cdb1f07e.png\\\",\\\"eBKIm\\\":\\\"heart.4cc18b58.png\\\"}\"));","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"11Lkf\")).toString();","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"eBKIm\")).toString();","import imgMarkerFilled from \"../img/heart_red.png\";\r\nimport imgMarkerNonFilled from \"../img/heart.png\";\r\n\r\nlet params = (new URL(document.location)).searchParams;\r\nconst id = Number(params.get(\"id\"));\r\n\r\nlet foodImg = document.querySelector(\".recipe__food-img\");\r\nlet foodName = document.querySelector(\".recipe__name\");\r\nlet foodArea = document.querySelector(\".recipe__area\");\r\nlet foodCategory = document.querySelector(\".recipe__category\");\r\nlet foodTags = document.querySelector(\".recipe__tags\");\r\nlet ingredients = document.querySelector(\".recipe__ingredients\");\r\nconst bookmark = document.querySelector(\".recipe__marker-btn-img\");\r\nconst shopListBtn = document.querySelector(\".recipe__ingredients-btn\");\r\n\r\nlet email = localStorage.getItem(\"welcomeemail\");\r\nlet arrFavorites = localStorage.getItem('favorites');\r\n\r\nlet modal = document.getElementById('myModal');\r\nlet span = document.getElementsByClassName(\"close\")[0];\r\nwindow.onclick = function (event) {\r\n    if (event.target == modal) {\r\n        modal.style.display = \"none\";\r\n    }\r\n}\r\n\r\nasync function loadData() {\r\n\r\n    let response = await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${id}`);\r\n\r\n    if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n    let data = await response.json();\r\n\r\n    document.title = data.meals[0].strMeal + \" Recipe\";\r\n\r\n    render(data);\r\n\r\n    const bookmarkBtn = document.querySelector(\".recipe__marker-btn\");\r\n    const message = document.querySelector(\".recipe__message\");\r\n    if (email && email != \"\") {\r\n\r\n        arrFavorites = checkFavorites();\r\n        bookmarkBtn.addEventListener(\"click\", function () {\r\n            addToFavorites(data);\r\n        });\r\n    } else {\r\n        bookmarkBtn.addEventListener('mouseover', (event) => {\r\n            message.style.display = \"block\";\r\n        });\r\n        bookmarkBtn.addEventListener('mouseout', (event) => {\r\n            message.style.display = \"none\";\r\n        });\r\n    }\r\n    shopListBtn.addEventListener(\"click\", function () {\r\n        addToShopList(data);\r\n    });\r\n}\r\n\r\nfunction addToFavorites(data) { //при нажатии на кнопку\r\n    let index = arrFavorites.findIndex((el) => el.email === email);\r\n    if (index > -1) {\r\n        {\r\n            if (!bookmark.classList.contains('active')) { //если нет класса active\r\n                bookmark.className += ' active'; //то добавляем ему этот класс\r\n                bookmark.src = imgMarkerFilled;\r\n                arrFavorites[index].favRecipes.push(id);\r\n            } else {\r\n                bookmark.className = 'recipe__marker-btn'; //то класс без active\r\n                bookmark.src = imgMarkerNonFilled;\r\n                arrFavorites[index].favRecipes = arrFavorites[index].favRecipes.filter((el) => el !== id); //удаляем из массива\r\n            }\r\n        }\r\n        localStorage.setItem('favorites', JSON.stringify(arrFavorites));\r\n    }\r\n}\r\n\r\nfunction checkFavorites() {\r\n\r\n    if (arrFavorites) { // если в сторадже что-то есть\r\n        arrFavorites = JSON.parse(arrFavorites);\r\n    } else {\r\n        arrFavorites = [{\r\n            email: email,\r\n            favRecipes: []\r\n        }]\r\n    }\r\n\r\n    let index = arrFavorites.findIndex((el) => el.email === email);\r\n    if (index > -1) {\r\n        let array = arrFavorites[index].favRecipes.slice();\r\n        if (array.find((el) => el == id)) { //если элемент есть в локал сторадж\r\n            bookmark.className += ' active';\r\n            bookmark.src = imgMarkerFilled;\r\n        }\r\n    } else {\r\n        arrFavorites.push({\r\n            email: email,\r\n            favRecipes: []\r\n        });\r\n        console.log(arrFavorites)\r\n    }\r\n    return arrFavorites;\r\n}\r\n\r\nfunction render(data) {\r\n\r\n    foodImg.src = data.meals[0].strMealThumb;\r\n    foodName.textContent = data.meals[0].strMeal;\r\n    foodArea.textContent = data.meals[0].strArea;\r\n    foodCategory.textContent = data.meals[0].strCategory;\r\n    foodTags.textContent = data.meals[0].strTags;\r\n    let foodYouTube = document.querySelector(\".recipe__youtube-link\");\r\n    foodYouTube.href = data.meals[0].strYoutube;\r\n\r\n    //rendering instruction\r\n\r\n    let instructions = document.querySelectorAll(\".recipe__instructions\");\r\n    for (let index = 0; index < instructions.length; index++) {\r\n        const instructionSpace = document.createElement('p');\r\n        instructionSpace.innerHTML = data.meals[0].strInstructions;\r\n        instructions[index].append(instructionSpace);\r\n    }\r\n\r\n    //rendering ingredients\r\n\r\n    for (let i = 1; i < 20; i++) {\r\n        if (data.meals[0][`strIngredient${i}`] == \"\" || data.meals[0][`strIngredient${i}`] == null) {\r\n            break;\r\n        } else {\r\n            const ingredientSpace = document.createElement('div');\r\n            ingredientSpace.className = \"recipe__instructions-forone\"\r\n            const ingredient = document.createElement('input');\r\n            const ingredientLabel = document.createElement('label');\r\n            ingredient.setAttribute(\"type\", \"checkbox\");\r\n            ingredient.value = data.meals[0][`strIngredient${i}`] + `${i}`;\r\n            ingredient.checked = true;\r\n            ingredient.setAttribute(\"id\", ingredient.value);\r\n            const t = document.createTextNode(data.meals[0][`strMeasure${i}`] + \" \" + data.meals[0][`strIngredient${i}`]);\r\n            ingredientLabel.setAttribute(\"for\", ingredient.value);\r\n            ingredientLabel.appendChild(t);\r\n            ingredients.append(ingredientSpace);\r\n            ingredientSpace.append(ingredient);\r\n            ingredientSpace.append(ingredientLabel);\r\n        }\r\n    }\r\n}\r\n\r\nfunction addToShopList(data) {\r\n    modal.style.display = \"block\";\r\n    const shopList = document.querySelector(\".shoplist\");\r\n    while (shopList.firstChild) {\r\n        shopList.removeChild(shopList.firstChild);\r\n    }\r\n    let checkboxes = document.querySelectorAll('input[type=\"checkbox\"]:checked');\r\n    for (let checkbox of checkboxes) {\r\n        let p = document.createElement(\"p\");\r\n        p.textContent = checkbox.parentNode.innerText;\r\n        shopList.append(p);\r\n    }\r\n\r\n    span.onclick = function () {\r\n        modal.style.display = \"none\";\r\n    }\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n    loadData();\r\n});"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$e4f27980029891b3$exports","URL","resolve","import","meta","url","toString","$367624768dd5f103$exports","$590ce0e7dd5e11a9$var$params","document","location","searchParams","$590ce0e7dd5e11a9$var$id","Number","get","$590ce0e7dd5e11a9$var$foodImg","querySelector","$590ce0e7dd5e11a9$var$foodName","$590ce0e7dd5e11a9$var$foodArea","$590ce0e7dd5e11a9$var$foodCategory","$590ce0e7dd5e11a9$var$foodTags","$590ce0e7dd5e11a9$var$ingredients","$590ce0e7dd5e11a9$var$bookmark","$590ce0e7dd5e11a9$var$shopListBtn","$590ce0e7dd5e11a9$var$email","localStorage","getItem","$590ce0e7dd5e11a9$var$arrFavorites","$590ce0e7dd5e11a9$var$modal","getElementById","$590ce0e7dd5e11a9$var$span","getElementsByClassName","async","$590ce0e7dd5e11a9$var$loadData","response","fetch","ok","status","data","json","title","meals","strMeal","src","strMealThumb","textContent","strArea","strCategory","strTags","href","strYoutube","instructions","querySelectorAll","index","instructionSpace","createElement","innerHTML","strInstructions","append","ingredientSpace","className","ingredient","ingredientLabel","setAttribute","value","checked","t","createTextNode","appendChild","$590ce0e7dd5e11a9$var$render","bookmarkBtn","message","email","favRecipes","findIndex","el","slice","find","$parcel$interopDefault","push","console","log","$590ce0e7dd5e11a9$var$checkFavorites","addEventListener","classList","contains","filter","setItem","stringify","$590ce0e7dd5e11a9$var$addToFavorites","event","style","display","shopList","firstChild","removeChild","checkboxes","checkbox","p","parentNode","innerText","onclick","$590ce0e7dd5e11a9$var$addToShopList","window","target"],"version":3,"file":"recipe.4a81bc33.js.map"}